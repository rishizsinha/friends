<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Friends</title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <link rel="stylesheet" href="stylesheets/friends.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body>

    <nav class="navbar navbar-inverse" role="navigation">
      <div class="container">

        <div class="navbar-header">
          <!-- Navigation Button -->
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only"> Toggle Navigation </span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand">
            <img src="images/friendslogoxs.png" class="logo" />
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navlinks">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Quote Generator</a></li>
            <li><a href="index.html">Best Quotes</a></li>
            <li><a href="quiz.html">Test Yourself!</a></li>
          </ul>
        </div>
        <!-- /.navbar-collapse -->  
      </div>
       <!-- /.container -->
    </nav> 

    <div class="wrapper">

      <h1> TEST YOUR FRIENDS KNOWLEDGE! </h1>

      <div id="scoreDiv">
        <p id="score"> Score: </p>
      </div>
      <div id="feedbackDiv" style="display:inline-block;">
        <p id="feedback"> </p>
      </div>

      <div id="questionDiv">
        <div id="quoteDisplay">
          <button id="startButton">Begin!</button>
        </div>

        <div id="optionsDiv">
          <div class="mc" id="o1">
          </div>
          <div class="mc" id="o2">
          </div>
          <div class="mc" id="o3">
          </div>
          <div class="mc" id="o4">
          </div>
        </div>
      </div>

      <div id="nextqDiv">
        <button id="nextButton">Next Question!</button>
      </div>

      <div>
        <p>This project is maintained by <a href="https://github.com/rishizsinha">rishizsinha</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </div>

    </div>
    <script>
      var totalq = 0;
      var rightq = 0;
      var storeRight;

      /**
       * Randomize array element order in-place.
       * Using Fisher-Yates shuffle algorithm.
       **/
      function shuffleArray(array) {
        for (var i = array.length - 1; i > 0; i--) {
          var j = Math.floor(Math.random() * (i + 1));
          var temp = array[i];
          array[i] = array[j];
          array[j] = temp;
        }
        return array;
      }

      function qGen() {
        $.getJSON("http://rishizsinha.github.io/friends/data/quotedb.json", function(data) {
          var q = data[Math.floor(Math.random()*data.length)];
          var w1 = data[Math.floor(Math.random()*data.length)];
          var w2 = data[Math.floor(Math.random()*data.length)];
          var w3 = data[Math.floor(Math.random()*data.length)];
          // Add quote to quote display
          $("#quoteDisplay").html("<i>'"+q.quote+"'</i></br>");
          // Start creating question options
          var correct = q.character+" ("+q.episode+")";
          storeRight = q.character+" ("+q.episode+")"
          var wrong1 = w1.character+" ("+w1.episode+")";
          var wrong2 = w2.character+" ("+w2.episode+")";
          var wrong3 = w3.character+" ("+w3.episode+")";
          var options = [correct, wrong1, wrong2, wrong3];
          options = shuffleArray(options);
          // Assign options to proper divs
          $("#o1").html("a) "+options[0]); 
          $("#o2").html("b) "+options[1]);
          $("#o3").html("c) "+options[2]);
          $("#o4").html("d) "+options[3]);      
        });
      };

      $('#startButton').click(function() {
        qGen();
      });

      $('.mc').click(function() {
        if ($(this).text().slice(3) == storeRight) {
          console.log("correct");
          $('#feedback').text("Correct!");
          rightq += 1;
          qGen();
        } else {
          console.log("wrong");
          $('#feedback').text("Wrong!");
        }
        totalq += 1;
        $('#score').text("Score: "+rightq+"/"+totalq);
      });

      $('#nextButton').click(function() {
        qGen();
      });

    </script>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>